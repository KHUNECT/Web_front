<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <title>KHU:NECT</title>
    <link rel="stylesheet" type="text/css" href="../static/signup.css">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:400,700&amp;subset=korean" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(function() {
            $("#imgInp").on('change', function(){
                readURL(this)
            })
        })
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
            }
        }
        $(document).ready(function(){
            $('#sendButton').click(function(){
                let form=$('#signupForm')[0]
                let formData=new FormData(form)
                let pw1=document.getElementById('signupPassword').value
                let pw2=document.getElementById('repeatPassword').value
                if(pw1!=pw2){
                    alert('비밀번호가 일치하지 않습니다!')
                    return false
                }
                $.ajax({
                    type:'POST',
                    //url:'http://13.125.196.191/api/user/create',
                    url:'api/user/create',
                    data:formData,
                    enctype:'multipart/form-data',
                    processData:false,
                    contentType:false,
                    cache:false,
                    success: function(){
                        alert('회원가입 완료!')
                        window.location.href='/main'
                    },
                    error: function(){
                        alert('회원가입 실패!')
                        return false
                    }
                })
            })
        })
    </script>
    <style>
        div 
        {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
</head>

<body>
<div id="top-layer_fixed">
    <table cellspacing="0" cellpadding="0" style="height:100%; margin: 0 auto;">
        <tr>
            <td style="vertical-align:middle; padding-left: 200px; padding-right: 220px;">
                <img src="../static/logo.png" height=45% />
            </td>
            <td>
                <div class="menubar">
                    <ul>
                        <li><a id="current" style="font-size:16px;font-weight: bold;">내 수업</a></li>
                        <li>
                            <a id="current" style="font-size:16px;font-weight: bold;">함께해요</a>
                            <ul>
                                <li><a href="/study">스터디</a></li>
                                <li><a href="/hobby">취미</a></li>
                            </ul>
                        </li>
                        <li>
                            <a id="current" style="font-size:16px;font-weight: bold;">홍보</a>
                            <ul>
                                <li><a href="/alba">알바</a></li>
                                <li><a href="/club">동아리</a></li>
                                <li><a href="/contest">공모전</a></li>
                            </ul>
                        </li>
                        <li>
                            <a id="current" style="font-size:16px;font-weight: bold;">거래</a>
                            <ul>
                                <li><a href="/market">거래</a></li>
                                <li><a href="/gonggu">공구</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </td>
        </tr>
    </table>
</div>
<div id="signup_page">
    <div id="main_banner">
        <img src="../static/sign_up_logo2.png" height=100px style="float:inherit; margin-top: 30px;">
    </div>
    <form id="signupForm" action="/main" method="get">
        <div id="signup_form" style="padding-right:15px; padding-top: 30px;">
            <div>
                <label for="signupName">이름</label>
                <br>
                <input type="text" id="signupName" required placeholder="이름을 입력해주세요" name="name">
            </div>
            <br>
            <label for="signupID">아이디</label>
            <br>
            <input type="text" id="signupID" required placeholder="아이디" name="userId">
            <div>
                <label for="signupPassword">비밀번호</label>
                <br>
                <input type="password" id="signupPassword" required placeholder="비밀번호" name="password">
                <div style="color:gray;">
                </div>
            </div>
            <div style="margin-bottom: 15px;">
                <label for="repeatPassword">비밀번호 확인</label>
                <br>
                <input type="password" id="repeatPassword" required placeholder="비밀번호 확인" name="password2">
                <div style="color:gray; font-size:small">
                    비밀번호 확인을 위해<br>다시 한번 입력해주세요.
                </div>
            </div>
            <div>
                <label for="signupEmail">이메일 주소</label>
                <br>
                <input type="email" id="signupEmail" required placeholder="이메일 주소" name="email">
                <br>
            </div>
        </div>
        <div id="signup_form" style=" padding-top: 30px;">
            <div>
                <label for="signupName">프로필 사진</label>
                <br>
                <form id="form1" runat="server">
                    <input type='file' id="imgInp" name="image">
                    <div style="margin-top:3px; width: 160px; height: 160px; background-color: grey; margin-bottom: 4px;">
                        <img id="blah" src="#" alt="img" width=160px height=160px>
                    </div>
                </form>
                <div>
                    <label for="signupEmail">닉네임</label>
                    <br>
                    <input type="email" id="signupNickname" required placeholder="닉네임" name="nickname">
                    <br>
                    <label for="signupName">전공</label>
                    <br>
                    <input type="text" id="major" required placeholder="전공" name="major">
                </div>
            </div>
        </div>
    </form>
    <br><br>
    <input type="button" id="sendButton" value="회원가입">
</div>
</body>


</html>